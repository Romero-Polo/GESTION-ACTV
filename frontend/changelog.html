<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Changelog - Sistema de Gesti√≥n de Actividades</title>
        <!-- Configuraci√≥n centralizada -->
    <script src="/config.js"></script>

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-6">
                <div class="flex items-center">
                    <h1 class="text-2xl font-bold text-gray-900">
                        Sistema de Gesti√≥n de Actividades
                    </h1>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="/" class="text-gray-600 hover:text-blue-600 transition-colors">
                        üè† Inicio
                    </a>
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800">
                        v1.6.1
                    </span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="min-h-screen py-8">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="bg-white shadow rounded-lg">
                <div class="px-6 py-4 border-b border-gray-200">
                    <div class="flex items-center justify-between">
                        <h1 class="text-2xl font-bold text-gray-900">
                            üìã Registro de Cambios
                        </h1>
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800">
                            v1.6.1 (2025-10-02)
                        </span>
                    </div>
                    <p class="mt-2 text-gray-600">
                        Historial de cambios y mejoras del Sistema de Gesti√≥n de Actividades
                    </p>
                </div>

                <div class="px-6 py-6">
                    <!-- Version 1.6.1 -->
                    <div class="mb-8">
                        <div class="flex items-center mb-4">
                            <div class="flex items-center">
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 mr-3">
                                    v1.6.1
                                </span>
                                <span class="text-sm text-gray-500">2 de Octubre, 2025</span>
                            </div>
                            <div class="ml-auto">
                                <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-50 text-red-700">
                                    üîß Correcciones cr√≠ticas
                                </span>
                            </div>
                        </div>

                        <div class="bg-gray-50 rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-gray-900 mb-3">
                                üîß Correcciones cr√≠ticas de conexi√≥n y carga de datos
                            </h3>

                            <div class="space-y-4">
                                <div>
                                    <h4 class="font-medium text-gray-800 mb-2">üêõ Correcci√≥n de sintaxis JavaScript</h4>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-4">
                                        <li>Corregido uso incorrecto de template literals en actividades.html y agenda.html</li>
                                        <li>API_BASE ahora usa sintaxis correcta con par√©ntesis de agrupaci√≥n</li>
                                        <li>Eliminado error de sintaxis que imped√≠a la carga de datos</li>
                                    </ul>
                                </div>

                                <div>
                                    <h4 class="font-medium text-gray-800 mb-2">‚úÖ Verificaci√≥n de conexi√≥n SQL Server</h4>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-4">
                                        <li>Confirmada conexi√≥n exitosa con SQL Server en puerto 3002</li>
                                        <li>Backend funcionando correctamente con PowerShell wrapper</li>
                                        <li>36 actividades cargando correctamente desde base de datos</li>
                                    </ul>
                                </div>

                                <div>
                                    <h4 class="font-medium text-gray-800 mb-2">üîÑ Restauraci√≥n de funcionalidad</h4>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-4">
                                        <li>P√°ginas actividades.html y agenda.html ahora cargan datos correctamente</li>
                                        <li>Soluci√≥n de problemas de visualizaci√≥n de actividades</li>
                                        <li>Configuraci√≥n API_BASE consistente en todo el frontend</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200">
                                <p class="text-sm text-blue-800">
                                    <strong>üìå Archivos modificados:</strong> actividades.html, agenda.html (l√≠nea de configuraci√≥n API_BASE)
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Version 1.5 -->
                    <div class="mb-8">
                        <div class="flex items-center mb-4">
                            <div class="flex items-center">
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 mr-3">
                                    v1.5
                                </span>
                                <span class="text-sm text-gray-500">30 de Septiembre, 2025</span>
                            </div>
                            <div class="ml-auto">
                                <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-purple-50 text-purple-700">
                                    ‚ú® Mejoras visuales y UX
                                </span>
                            </div>
                        </div>

                        <div class="bg-gray-50 rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-gray-900 mb-3">
                                ‚ú® Mejoras visuales en vista agenda
                            </h3>

                            <div class="space-y-4">
                                <div>
                                    <h4 class="font-medium text-gray-800 mb-2">üéØ Gesti√≥n visual de actividades abiertas</h4>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-4">
                                        <li>Actividades con fecha_fin = 2099-12-31 ahora muestran "abierta" en lugar de fechas confusas</li>
                                        <li>Para actividades multi-d√≠a: formato "fecha_inicio ‚Üí abierta" (ej: "28/10/2025 ‚Üí abierta")</li>
                                        <li>Cambio solo visual - no afecta datos en base de datos</li>
                                        <li>Detecci√≥n autom√°tica y manejo inteligente seg√∫n tipo de d√≠a</li>
                                    </ul>
                                </div>

                                <div>
                                    <h4 class="font-medium text-gray-800 mb-2">üìê Centrado de contenido en bloques</h4>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-4">
                                        <li>Todo el texto dentro de bloques de actividad se centra horizontalmente</li>
                                        <li>Alineaci√≥n perfecta para obra, nombre de actividad y fechas/horas</li>
                                        <li>Mejora visual significativa en la presentaci√≥n de informaci√≥n</li>
                                        <li>Consistencia aplicada a todos los elementos de contenido</li>
                                    </ul>
                                </div>

                                <div>
                                    <h4 class="font-medium text-gray-800 mb-2">üé® Limpieza visual de bloques</h4>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-4">
                                        <li>Eliminados todos los bordes (s√≥lidos y discontinuos) de actividades</li>
                                        <li>Presentaci√≥n m√°s limpia con solo colores de fondo y sombras</li>
                                        <li>Mejor legibilidad y aspecto profesional</li>
                                        <li>Mantenidas esquinas redondeadas para consistencia visual</li>
                                    </ul>
                                </div>

                                <div>
                                    <h4 class="font-medium text-gray-800 mb-2">üìÖ Formato de fechas espa√±ol</h4>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-4">
                                        <li>Todas las fechas en bloques ahora usan formato dd/mm/aaaa</li>
                                        <li>Adaptado a convenciones regionales espa√±olas</li>
                                        <li>Funci√≥n formatDate() autom√°tica para conversi√≥n ISO ‚Üí espa√±ol</li>
                                        <li>Aplicado universalmente en actividades multi-d√≠a y normales</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="mt-6 p-4 bg-purple-50 rounded-lg border-l-4 border-purple-400">
                                <div class="flex">
                                    <div class="flex-shrink-0">
                                        <span class="text-purple-400">‚ú®</span>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm text-purple-700">
                                            <strong>Enfoque en experiencia de usuario:</strong> Esta versi√≥n se centr√≥ exclusivamente en mejorar
                                            la presentaci√≥n visual y la comprensi√≥n de la informaci√≥n en la vista agenda, sin cambios funcionales.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Version 1.4 -->
                    <div class="mb-8">
                        <div class="flex items-center mb-4">
                            <div class="flex items-center">
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 mr-3">
                                    v1.4
                                </span>
                                <span class="text-sm text-gray-500">29 de Septiembre, 2025</span>
                            </div>
                            <div class="ml-auto">
                                <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-50 text-red-700">
                                    üîß Correcciones cr√≠ticas y nuevas funciones
                                </span>
                            </div>
                        </div>

                        <div class="bg-gray-50 rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-gray-900 mb-3">
                                üÜï Nuevas funcionalidades
                            </h3>

                            <div class="space-y-4">
                                <div>
                                    <h4 class="font-medium text-gray-800 mb-2">üîÑ Actualizaci√≥n Autom√°tica en Vista Agenda</h4>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-4">
                                        <li>Auto-refresh completo despu√©s de crear, editar o eliminar actividades</li>
                                        <li>Vista se actualiza autom√°ticamente sin p√©rdida de contexto o filtros</li>
                                        <li>Feedback claro sobre estado del refresh</li>
                                        <li>Sistema robusto de fallbacks en caso de errores</li>
                                        <li>Preservaci√≥n del estado de visualizaci√≥n activo</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="mt-4 pt-4 border-t border-gray-200">
                                <h4 class="font-medium text-gray-800 mb-2">üîß Correcciones cr√≠ticas de bugs</h4>
                                <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-4">
                                    <li><strong>Timeout de 2+ minutos solucionado:</strong> Eliminado problema de readBody() duplicado en middleware</li>
                                    <li><strong>Manejo robusto de request body:</strong> Middleware de logging mejorado</li>
                                    <li><strong>Formato de fechas y NULL:</strong> Correcci√≥n en manejo de valores nulos en SQL</li>
                                    <li><strong>Nomenclatura de columnas:</strong> Consistencia entre camelCase y snake_case</li>
                                    <li><strong>Actualizaci√≥n parcial:</strong> Soporte completo para updates incrementales</li>
                                </ul>
                            </div>

                            <div class="mt-4 pt-4 border-t border-gray-200">
                                <h4 class="font-medium text-gray-800 mb-2">‚ö° Mejoras de rendimiento</h4>
                                <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-4">
                                    <li>Edici√≥n de actividades ahora se completa en milisegundos</li>
                                    <li>Actualizaci√≥n optimista con procesamiento en background</li>
                                    <li>Re-renderizado inteligente solo de elementos necesarios</li>
                                    <li>Logging detallado para debugging y monitoreo</li>
                                </ul>
                            </div>

                            <div class="mt-6 p-4 bg-green-50 rounded-lg border-l-4 border-green-400">
                                <div class="flex">
                                    <div class="flex-shrink-0">
                                        <span class="text-green-400">‚úÖ</span>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm text-green-700">
                                            <strong>Rendimiento mejorado:</strong> Los problemas de timeout han sido completamente solucionados.
                                            El sistema ahora responde de forma inmediata y confiable.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Version 1.3 -->
                    <div class="mb-8">
                        <div class="flex items-center mb-4">
                            <div class="flex items-center">
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800 mr-3">
                                    v1.3
                                </span>
                                <span class="text-sm text-gray-500">26 de Septiembre, 2025</span>
                            </div>
                            <div class="ml-auto">
                                <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-orange-50 text-orange-700">
                                    üìà Mejoras y nuevas funciones
                                </span>
                            </div>
                        </div>

                        <div class="bg-gray-50 rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-gray-900 mb-3">
                                üÜï Nuevas funcionalidades
                            </h3>

                            <div class="space-y-4">
                                <div>
                                    <h4 class="font-medium text-gray-800 mb-2">üìä Sistema de Logs y Monitoreo</h4>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-4">
                                        <li>Nueva p√°gina de logs y monitoreo de llamadas API</li>
                                        <li>Visualizaci√≥n de estad√≠sticas en tiempo real</li>
                                        <li>Filtros avanzados por m√©todo HTTP, estado, endpoint y tiempo</li>
                                        <li>Auto-actualizaci√≥n opcional cada 5 segundos</li>
                                        <li>Exportaci√≥n de logs en formato JSON</li>
                                        <li>Interfaz moderna y responsive</li>
                                    </ul>
                                </div>

                                <div>
                                    <h4 class="font-medium text-gray-800 mb-2">üì± Campo Tel√©fono M√≥vil en Recursos</h4>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-4">
                                        <li>Nuevo campo telefono_movil en la tabla de recursos</li>
                                        <li>Migraci√≥n autom√°tica de base de datos</li>
                                        <li>Actualizaci√≥n de interfaces TypeScript</li>
                                        <li>Nueva columna en la lista de recursos</li>
                                        <li>Soporte completo en backend y frontend</li>
                                    </ul>
                                </div>

                                <div>
                                    <h4 class="font-medium text-gray-800 mb-2">‚öôÔ∏è Mejoras en Configuraci√≥n</h4>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-4">
                                        <li>Nueva secci√≥n "Logs y Monitoreo" en configuraci√≥n</li>
                                        <li>Acceso directo desde el men√∫ de configuraci√≥n</li>
                                        <li>Funci√≥n de exportaci√≥n integrada</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="mt-4 pt-4 border-t border-gray-200">
                                <h4 class="font-medium text-gray-800 mb-2">üîß Mejoras t√©cnicas</h4>
                                <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-4">
                                    <li>Optimizaci√≥n de la p√°gina de logs para uso pasivo</li>
                                    <li>Eliminaci√≥n de llamadas autom√°ticas innecesarias</li>
                                    <li>Mejora en el manejo de request body en backend</li>
                                    <li>Actualizaci√≥n de consultas SQL para incluir nuevos campos</li>
                                    <li>Interfaces TypeScript actualizadas</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Version 1.0.0 -->
                    <div class="mb-8">
                        <div class="flex items-center mb-4">
                            <div class="flex items-center">
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 mr-3">
                                    v1.0.0
                                </span>
                                <span class="text-sm text-gray-500">15 de Septiembre, 2025</span>
                            </div>
                            <div class="ml-auto">
                                <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-50 text-blue-700">
                                    üéâ Lanzamiento inicial
                                </span>
                            </div>
                        </div>

                        <div class="bg-gray-50 rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-gray-900 mb-3">
                                ‚ú® Funcionalidades iniciales
                            </h3>

                            <div class="space-y-4">
                                <div>
                                    <h4 class="font-medium text-gray-800 mb-2">üîê Sistema de Autenticaci√≥n</h4>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-4">
                                        <li>Login seguro con JWT</li>
                                        <li>Registro de nuevos usuarios</li>
                                        <li>Gesti√≥n de sesiones</li>
                                        <li>Protecci√≥n de rutas privadas</li>
                                    </ul>
                                </div>

                                <div>
                                    <h4 class="font-medium text-gray-800 mb-2">üèóÔ∏è Gesti√≥n de Obras</h4>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-4">
                                        <li>Visualizaci√≥n de obras activas</li>
                                        <li>Detalles completos de cada obra</li>
                                        <li>Estados y seguimiento</li>
                                    </ul>
                                </div>

                                <div>
                                    <h4 class="font-medium text-gray-800 mb-2">üöõ Gesti√≥n de Recursos</h4>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-4">
                                        <li>Listado de recursos disponibles</li>
                                        <li>Informaci√≥n de veh√≠culos y equipos</li>
                                        <li>Estados de disponibilidad</li>
                                        <li>Creaci√≥n y edici√≥n de recursos</li>
                                    </ul>
                                </div>

                                <div>
                                    <h4 class="font-medium text-gray-800 mb-2">üë• Gesti√≥n de Equipos</h4>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-4">
                                        <li>Creaci√≥n y gesti√≥n de equipos</li>
                                        <li>Asignaci√≥n de recursos a equipos</li>
                                        <li>Visualizaci√≥n de equipos activos</li>
                                    </ul>
                                </div>

                                <div>
                                    <h4 class="font-medium text-gray-800 mb-2">üìä Gesti√≥n de Actividades</h4>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-4">
                                        <li>Creaci√≥n de nuevas actividades</li>
                                        <li>Seguimiento de actividades en curso</li>
                                        <li>Tipos de actividad predefinidos</li>
                                        <li>Asignaci√≥n de recursos y equipos</li>
                                    </ul>
                                </div>

                                <div>
                                    <h4 class="font-medium text-gray-800 mb-2">üîß Infraestructura T√©cnica</h4>
                                    <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 ml-4">
                                        <li>Conexi√≥n a base de datos SQL Server</li>
                                        <li>API REST completa</li>
                                        <li>Frontend React con TypeScript</li>
                                        <li>Sistema de rutas y navegaci√≥n</li>
                                        <li>Interfaz responsive con Tailwind CSS</li>
                                        <li><strong>üìã Sistema de Changelog</strong> - Registro de versiones y cambios</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="mt-6 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-400">
                                <div class="flex">
                                    <div class="flex-shrink-0">
                                        <span class="text-blue-400">‚ÑπÔ∏è</span>
                                    </div>
                                    <div class="ml-3">
                                        <p class="text-sm text-blue-700">
                                            <strong>Nota:</strong> Esta fue la primera versi√≥n del sistema.
                                            Algunas funcionalidades pueden estar en desarrollo o requerir mejoras adicionales.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pr√≥ximas versiones placeholder -->
                    <div class="border-t pt-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">
                            üöÄ Pr√≥ximas actualizaciones
                        </h3>
                        <div class="bg-yellow-50 rounded-lg p-4">
                            <div class="flex">
                                <div class="flex-shrink-0">
                                    <span class="text-yellow-400">‚ö†Ô∏è</span>
                                </div>
                                <div class="ml-3">
                                    <p class="text-sm text-yellow-700">
                                        Las pr√≥ximas versiones incluir√°n nuevas funcionalidades,
                                        mejoras de rendimiento y correcciones de errores.
                                        Este registro se actualizar√° con cada nueva versi√≥n.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 mt-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex justify-between items-center text-sm text-gray-500">
                <div>
                    ¬© 2025 Sistema de Gesti√≥n de Actividades
                </div>
                <div class="flex items-center space-x-4">
                    <span>Versi√≥n 1.5</span>
                    <a href="/changelog.html" class="hover:text-blue-600 transition-colors">
                        Ver cambios
                    </a>
                </div>
            </div>
        </div>
    </footer>

    
    <!-- Footer de informaci√≥n de conexi√≥n -->
    <footer style="position: fixed; bottom: 0; left: 0; right: 0; background-color: #1f2937; color: #9ca3af; padding: 8px 16px; font-size: 11px; border-top: 1px solid #374151; z-index: 1000;">
        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
            <div style="display: flex; gap: 15px; align-items: center;">
                <span>Frontend: http://localhost:5173</span>
                <span>Backend: <span id="apiBaseUrl">http://localhost:3002</span></span>
            </div>
            <div style="display: flex; gap: 15px; align-items: center;">
                <span>√öltima llamada: <span id="lastApiCall">Ninguna</span></span>
                <span id="apiStatus" style="padding: 2px 6px; border-radius: 3px; background-color: #374151;">Esperando...</span>
            </div>
        </div>
    </footer>

    <!-- Script para monitorear llamadas API -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Actualizar la URL del API en el footer
            const apiBaseElement = document.getElementById('apiBaseUrl');
            if (apiBaseElement && typeof API_BASE !== 'undefined') {
                apiBaseElement.textContent = API_BASE;
            }

            // Interceptar llamadas fetch para mostrar actividad de API
            const originalFetch = window.fetch;
            const lastApiCallElement = document.getElementById('lastApiCall');
            const apiStatusElement = document.getElementById('apiStatus');

            window.fetch = async function(...args) {
                const [url, options] = args;

                // Solo mostrar llamadas que vayan al API backend
                if (typeof url === 'string' && (url.includes('localhost:300') || url.includes(API_BASE))) {
                    const method = options?.method || 'GET';
                    const endpoint = url.replace(API_BASE, '').split('?')[0];

                    // Mostrar llamada en progreso
                    lastApiCallElement.textContent = `${method} ${endpoint}`;
                    apiStatusElement.textContent = 'Cargando...';
                    apiStatusElement.style.backgroundColor = '#f59e0b';

                    try {
                        const response = await originalFetch(...args);

                        // Mostrar resultado
                        const status = response.ok ? 'OK' : `Error ${response.status}`;
                        apiStatusElement.textContent = status;
                        apiStatusElement.style.backgroundColor = response.ok ? '#10b981' : '#ef4444';

                        // Resetear despu√©s de 2 segundos
                        setTimeout(() => {
                            if (apiStatusElement.textContent === status) {
                                apiStatusElement.textContent = 'Listo';
                                apiStatusElement.style.backgroundColor = '#374151';
                            }
                        }, 2000);

                        return response;
                    } catch (error) {
                        apiStatusElement.textContent = 'Error de red';
                        apiStatusElement.style.backgroundColor = '#ef4444';
                        setTimeout(() => {
                            apiStatusElement.textContent = 'Error';
                            apiStatusElement.style.backgroundColor = '#374151';
                        }, 3000);
                        throw error;
                    }
                }

                return originalFetch(...args);
            };
        });
    </script>

    <script>
        // Inicializar configuraci√≥n si no est√° disponible
        document.addEventListener('DOMContentLoaded', async function() {
            if (!window.appConfig || !window.appConfig.initialized) {
                console.warn('‚ö†Ô∏è Sistema de configuraci√≥n no disponible, usando valores por defecto');
                if (!window.API_BASE) {
                    window.API_BASE = 'http://localhost:3002';
                }
            } else {
                await window.appConfig.init();
                // Actualizar API_BASE local si existe
                if (typeof API_BASE !== 'undefined') {
                    API_BASE = window.API_BASE;
                }
            }
        });
    </script>
</body>
</html>